# Records FastAPI

Веб сервис, выполняющий следующие функции:
1.	Создание пользователя, POST: 
- Принимает на вход запросы с именем пользователя
- Создаёт в базе данных пользователя с заданным именем и уникальным идентификатором пользователя, генерирует UUID токен доступа (в виде строки) для данного пользователя
- Возвращает сгенерированные идентификатор пользователя и токен.
2. Добавление аудиозаписи, POST:
- Принимает на вход запросы, содержащие уникальный идентификатор пользователя, токен доступа и аудиозапись в формате wav
- Преобразует аудиозапись в формат mp3, генерирует для неё уникальный UUID идентификатор и сохраняет их в базе данных
- Возвращает URL для скачивания записи.
3. Доступ к аудиозаписи, GET: Предоставляет возможность скачать аудиозапись по ссылке.

## Технологии
Python, FastAPI, Pydantic, SQLAlchemy, Alembic, PostgreSQL, Docker

## Запуск проекта
- Скачайте проект: git clone https://github.com/EscapeFromHell/records_fastapi.git
- После скачивания проекта, перейдите в папку проекта: cd records_fastapi
- Выполните команду: docker compose up -d --build
- После запуска контейнеров, проект будет доступен по ссылке: 
http://127.0.0.1:8001/docs

## Примеры запросов:
```bash
curl -X 'POST' 'http://127.0.0.1:8001/api_v1/users/?username=admin' -H 'accept: application/json' -d ''
```
Данный запрос создаст пользователя admin в БД. В ответе на запрос будут получены ID и токен пользователя.
________________________________________________________________________________________________________________________
```bash
curl -X 'POST' 'http://127.0.0.1:8001/api_v1/records/?user_id={ID_пользователя}&user_token={Токен_пользователя}' -H 'accept: application/json' -H 'Content-Type: multipart/form-data' -F 'record=@/путь/к/аудиофайлу.wav;type=audio/wav'
```
Запрос для отправки аудиозаписи в формате WAV. В ответ будет получена ссылка на скачивание файла в формате MP3. Скачать аудиозапись в формате WAV можно здесь:
https://samplelib.com/ru/sample-wav.html
________________________________________________________________________________________________________________________
```bash
curl -X 'GET' 'http://127.0.0.1:8001/api_v1/records/?record_id={ID_записи}&user_id={ID_пользователя}' -H 'accept: application/json'
```
Запрос для скачивания аудиозаписи в формате MP3.